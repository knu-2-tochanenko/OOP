# Отзыв о библиотеках

## Использованные библиотеки
* [zlib](http://www.zlib.net/)
* [libPNG](http://www.libpng.org/)
* [libHARU](http://libharu.org/)
* [nlohmann/json](https://github.com/nlohmann/json)

## nlohmann/json
Начнем с хорошей библиотеки\
**1. Для каких задач подходит библиотека?**\
    Данная библиотека является отличным средством для чтения и генерирования JSON файлов.\
**2. Почему эта библиотека?**\
    Она использует современный C++ и является некой идеей имплементации работы с JSON в стандартный C++.\
**3. Насколько просто было скачать, установить и настроить библиотеку?**\
    Библиотека является single-header, так что скачать, установить и настроить библиотеку не составило особого труда.\
**4. Насколько полезной и понятной была документация?**\
    Документация крайне удобная и понятная. К сожалению, вся она находится в файле README.md, а не в отдельной Wiki\
**5. Насколько понятно было как именно использовать библиотеку, какие классы/методы/функции использовать для решения поставленных задач?**\
    Библиотека имплементирует тип данных `json`, который можно инициализировать как обычный массив, при помощи фигурных скобок, но тут создатель библиотеки пошел дальше и сделал возможным создавать переменную типа `json` сразу с массивами. Это надо видеть:

```cpp
json j = {
  {"pi", 3.141},
  {"happy", true},
  {"name", "Niels"},
  {"nothing", nullptr},
  {"answer", {
    {"everything", 42}
  }},
  {"list", {1, 0, 2}},
  {"object", {
    {"currency", "USD"},
    {"value", 42.99}
  }}
};
```

**6. Насколько удобно было использовать библиотеку, нужно ли было писать много лишнего кода?**\
    Библиотека работает наподобие `map`, то есть в поле с именем `"pi"` значение записывается так: `j["pi"] = 3.14`, что бы взять значение, используем метод `.get<type>()`, где вместо `type` пишем нужный нам тип. Массивы хранит в `vector<type>`.\
**7. Насколько понятной было поведение классов/методов/функций из библиотеки?**\
    Как писалось ранее, использование крайне понятное, короткое и простое.\
**8. Насколько понятным было взаимодействие между разными классами/методами/функциями этой библиотеки, а так же взаимодействие библиотеки с собственным кодом?**\
    Функция `.get<type>()` переводит из типа `json` в заданный нами, а конвертация из `int`, `bouble`, `string`, `vector<type>`, etc... происходят незаметно.\
**9. Были ли какие-то проблемы во время использования библиотеки?**\
    Проблем не было.\
**10. Что хорошего в этой библиотеке?**\
    Она легкая, понятная и использует современный C++.\
**11. Что плохого было в этой библиотеке?**\
    Ничего.\
**12. По опыту использования библиотеки, для выполнения аналогичной задачи использовалась ли та же библиотека? Что бы поменялось или было сделано по-другому?**\
    Все осталось бы так же. Пожалуй, поставлю звездочку этому проекту, так как он, возможно, в будущем еще пригодится. Хотелось бы что бы именно эта библиотека в новых версиях C++ стала стандартной для работы с JSON в C++.

## libHARU
Теперь об ужасном.\
**1. Для каких задач подходит библиотека?**\
    Данная библиотека является одной из многих, которая способна генерировать файлы в формате PDF\
**2. Почему эта библиотека?**\
    Бесплатная, с открытым исходным кодом, совместима с C++\
**3. Насколько просто было скачать, установить и настроить библиотеку?**\
    Это просто ужасно. Скачать ее - на раз два. А что бы установить, статейки на Wiki не достаточно. Там же все просто : распаковал, запустил `make` или `nmake` и готово. Но не тут то было! Библиотека требует так же установленные zlib и libharu, про которых в туториале ничего не написано. Ладно это, так оно еще и требует древние версии компилятора!\
    В общем, устанавливал я библиотеку недели три, с разными компиляторами, на разных машинах, операционных системах. И тут я наткнулся на [сообщение об ошибки](https://github.com/libharu/libharu/issues/135) от пользователя [Tieske909090](https://github.com/Tieske909090). Там он так же настрадался с данной библиотекой. Но вот он решил собрать ее при помощи CMake. И все вышло! Он любезно предоставил [инструкцию](https://github.com/libharu/libharu/files/435690/Libharu.with.VS2015.pdf), в которой подробно описал процесс установки при помощи компилятора, которого нет в документации. **Это не нормально, когда комментарии в 100 раз лучше, чем официальная Wiki!**\
**4. Насколько полезной и понятной была документация?**\
    Вообще ужасная. Порадовало только то, что тут есть примеры использования той или иной функции, а так же поиск по кодам ошибок.\
**5. Насколько понятно было как именно использовать библиотеку, какие классы/методы/функции использовать для решения поставленных задач?**\
    Для создания нового PDF документа, необходимо иметь функцию обработки ошибок, которую пользователь должен писать сам. Да ладно это, посмотрите на этот ужас, который требуется для нормального функционирования библиотеки:

```cpp
jmp_buf env;
#ifdef HPDF_DLL
void  __stdcall
#else
void
#endif
error_handler(HPDF_STATUS   error_no,
	HPDF_STATUS   detail_no,
	void         *user_data) {
	printf("ERROR: error_no=%04X, detail_no=%u\n", (HPDF_UINT)error_no,
		(HPDF_UINT)detail_no);
	longjmp(env, 1);
}
```

**6. Насколько удобно было использовать библиотеку, нужно ли было писать много лишнего кода?**\
    Прошлый пункт описывает в красках весь лишний код. В процессе создания страниц и текста дополнительных странных функций и методов не было выявлено.\
**7. Насколько понятной было поведение классов/методов/функций из библиотеки?**\
    Довольно понятно. Ничего странного не было.\
**8. Насколько понятным было взаимодействие между разными классами/методами/функциями этой библиотеки, а так же взаимодействие библиотеки с собственным кодом?**\
    Проблема данной библиотеки в том, что она не умеет работать с типом `string`, так что приходилось ручками его переводить в `char* const`.\
**9. Были ли какие-то проблемы во время использования библиотеки?**\
    Выдавались ошибки, которые указывали на невозможность запуска графического интерфейса, а так же на прекращение записи текста в файл. Возможно, я что-то делал не так, но я более, чем уверен, что проблема на стороне библиотеки.\
**10. Что хорошего в этой библиотеке?**\
    Ничего. Разве что то, что она бесплатна.\
**11. Что плохого было в этой библиотеке?**\
    Все.\
**12. По опыту использования библиотеки, для выполнения аналогичной задачи использовалась ли та же библиотека? Что бы поменялось или было сделано по-другому?**\
    К сожалению, нормальных библиотек для генерации PDF на C++ не нашел, так что я бы предпочел выбрать библиотеки, которые расширяют функционал других языков. Например, Python или Java. Там то точно есть что-то современное и удобное.